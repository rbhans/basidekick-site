{
  "feature": "BAS References Page",
  "workflow_type": "feature",
  "workflow_rationale": "This is a new feature requiring creation of new page route, view component, and reference content. It follows established patterns from the calculators page but creates entirely new content.",
  "phases": [
    {
      "id": "phase-1-constants",
      "name": "Constants & Routing Setup",
      "type": "implementation",
      "description": "Add REFERENCES constants to VIEW_IDS, ROUTES, and update routing functions",
      "depends_on": [],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Add REFERENCES to VIEW_IDS constant in lib/types.ts",
          "service": "frontend",
          "files_to_modify": [
            "lib/types.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "lib/types.ts"
          ],
          "verification": {
            "type": "command",
            "command": "grep -n 'REFERENCES' lib/types.ts",
            "expected": "REFERENCES: \"references\""
          },
          "status": "completed",
          "notes": "Added REFERENCES: \"references\" to VIEW_IDS constant in lib/types.ts. Verification passed with grep -n 'REFERENCES' lib/types.ts showing line 74.",
          "updated_at": "2026-01-06T04:55:31.971400+00:00"
        },
        {
          "id": "subtask-1-2",
          "description": "Add REFERENCES route constant and update getRouteForViewId and getViewIdFromPath functions in lib/routes.ts",
          "service": "frontend",
          "files_to_modify": [
            "lib/routes.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "lib/routes.ts"
          ],
          "verification": {
            "type": "command",
            "command": "grep -n 'REFERENCES\\|references' lib/routes.ts | wc -l",
            "expected": "at least 4 occurrences (ROUTES, getRouteForViewId case, getViewIdFromPath exact match, and startsWith check)"
          },
          "status": "completed",
          "notes": "Added REFERENCES route constant and updated both getRouteForViewId and getViewIdFromPath functions. Verification passed with 6 occurrences (expected minimum 4).",
          "updated_at": "2026-01-06T04:56:37.900138+00:00"
        },
        {
          "id": "subtask-1-3",
          "description": "Add REFERENCES to VIEW_TITLES, VIEW_LOADING_TEXT, and NAV_ITEMS (under RESOURCES children) in lib/constants.ts",
          "service": "frontend",
          "files_to_modify": [
            "lib/constants.ts"
          ],
          "files_to_create": [],
          "patterns_from": [
            "lib/constants.ts"
          ],
          "verification": {
            "type": "command",
            "command": "grep -n 'REFERENCES\\|References' lib/constants.ts | wc -l",
            "expected": "at least 3 occurrences (VIEW_TITLES, VIEW_LOADING_TEXT, NAV_ITEMS)"
          },
          "status": "pending"
        }
      ]
    },
    {
      "id": "phase-2-page",
      "name": "Page Route Creation",
      "type": "implementation",
      "description": "Create the references page route wrapper component",
      "depends_on": [
        "phase-1-constants"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Create app/(main)/references/page.tsx as a simple wrapper that imports and renders ReferencesView",
          "service": "frontend",
          "files_to_modify": [],
          "files_to_create": [
            "app/(main)/references/page.tsx"
          ],
          "patterns_from": [
            "app/(main)/calculators/page.tsx"
          ],
          "verification": {
            "type": "command",
            "command": "cat app/\\(main\\)/references/page.tsx",
            "expected": "import { ReferencesView } and default export function"
          },
          "status": "pending"
        }
      ]
    },
    {
      "id": "phase-3-view",
      "name": "View Component Implementation",
      "type": "implementation",
      "description": "Create the main references view component with all reference sections",
      "depends_on": [
        "phase-1-constants"
      ],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Create components/views/references-view.tsx with header (CircuitBackground, SectionLabel), Section component, and all 6 reference sections: BACnet Object Types, Modbus Register Types, HVAC Equipment, Piping & Fluids, Controls Abbreviations, Electrical & Power",
          "service": "frontend",
          "files_to_modify": [],
          "files_to_create": [
            "components/views/references-view.tsx"
          ],
          "patterns_from": [
            "components/views/calculators-view.tsx"
          ],
          "verification": {
            "type": "browser",
            "url": "http://localhost:3000/references",
            "checks": [
              "Page loads without errors",
              "Header with CircuitBackground and SectionLabel displays",
              "At least 6 collapsible sections visible",
              "First section is open by default",
              "Tables render with reference data"
            ]
          },
          "status": "pending",
          "notes": "This is the largest subtask - implement all reference data as static TypeScript arrays within the component. Follow calculators-view.tsx Section component pattern exactly."
        }
      ]
    },
    {
      "id": "phase-4-verification",
      "name": "End-to-End Verification",
      "type": "integration",
      "description": "Verify the complete implementation works correctly",
      "depends_on": [
        "phase-2-page",
        "phase-3-view"
      ],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Verify navigation shows References under Resources and clicking navigates to /references",
          "all_services": true,
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "e2e",
            "steps": [
              "Start dev server with npm run dev",
              "Navigate to http://localhost:3000",
              "Verify 'References' appears in sidebar under RESOURCES",
              "Click 'References' in sidebar",
              "Verify URL is /references",
              "Verify page content loads with header and sections",
              "Toggle section collapse/expand",
              "Check responsive behavior on mobile viewport",
              "Verify dark mode renders correctly"
            ]
          },
          "status": "pending"
        },
        {
          "id": "subtask-4-2",
          "description": "Run lint to ensure code quality",
          "service": "frontend",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "command",
            "command": "npm run lint",
            "expected": "No errors"
          },
          "status": "pending"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 4,
    "total_subtasks": 6,
    "services_involved": [
      "frontend"
    ],
    "parallelism": {
      "max_parallel_phases": 2,
      "parallel_groups": [
        {
          "phases": [
            "phase-2-page",
            "phase-3-view"
          ],
          "reason": "Both depend only on phase-1-constants and modify different files"
        }
      ],
      "recommended_workers": 1,
      "speedup_estimate": "Sequential execution recommended due to small task size"
    },
    "startup_command": "npm run dev"
  },
  "verification_strategy": {
    "risk_level": "low",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": [
      "lint"
    ],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "New route /references loads without errors",
      "References page displays with correct header pattern",
      "At least 6 collapsible sections with reference data",
      "Navigation shows References under Resources",
      "First section opens by default",
      "Page is responsive (mobile and desktop)",
      "No console errors",
      "Lint passes"
    ],
    "verification_steps": [
      {
        "name": "ESLint",
        "command": "npm run lint",
        "expected_outcome": "No errors",
        "type": "lint",
        "required": true,
        "blocking": true
      },
      {
        "name": "Build Check",
        "command": "npm run build",
        "expected_outcome": "Build succeeds",
        "type": "build",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "Low risk change following established patterns. No API changes, no auth, no sensitive data. Focus on visual/functional verification."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": false,
      "commands": [],
      "minimum_coverage": null
    },
    "integration_tests": {
      "required": false,
      "commands": [],
      "services_to_test": []
    },
    "e2e_tests": {
      "required": false,
      "commands": [],
      "flows": []
    },
    "browser_verification": {
      "required": true,
      "pages": [
        {
          "url": "http://localhost:3000/references",
          "checks": [
            "renders",
            "no-console-errors",
            "sections-collapsible",
            "responsive"
          ]
        }
      ]
    },
    "database_verification": {
      "required": false,
      "checks": []
    }
  },
  "qa_signoff": null,
  "created_at": "2026-01-06T04:51:00.000Z",
  "updated_at": "2026-01-06T04:54:27.846Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "last_updated": "2026-01-06T04:56:37.900145+00:00"
}